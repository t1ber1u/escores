import fs from 'fs';
import path from 'path';

const cookiesFilePath = path.join(__dirname, 'cookies.json');

export const saveCookies = async (browser: WebdriverIO.Browser) => {
  const cookies = await browser.getCookies();
  fs.writeFileSync(cookiesFilePath, JSON.stringify(cookies));
};

export const loadCookies = async (browser: WebdriverIO.Browser) => {
  if (fs.existsSync(cookiesFilePath)) {
    const cookies = JSON.parse(fs.readFileSync(cookiesFilePath, 'utf8'));
    await browser.setCookies(cookies);
  }
};

export const deleteCookiesFile = () => {
  if (fs.existsSync(cookiesFilePath)) {
    fs.unlinkSync(cookiesFilePath);
  }
};