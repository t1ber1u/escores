npm install wdio-multiple-cucumber-html-reporter --save-dev
# or
yarn add wdio-multiple-cucumber-html-reporter --dev

import { browser } from 'webdriverio';

// Capture screenshot
const screenshot = await browser.takeScreenshot();
multipleCucumberHtmlReporter.attach(screenshot, 'image/png', 'after');


import { Given, Then } from '@wdio/cucumber-framework';
import { expect } from '@wdio/globals';
import openUrl from '../support/action/openUrl';
import DashboardPage from '../pages/dashboard.page';
import multipleCucumberHtmlReporter from 'wdio-multiple-cucumber-html-reporter';

After(async (scenarioResult) => {
    if (scenarioResult.result.status === Status.FAILED) {
        // It will add the screenshot to the JSON
        const screenshot = await browser.takeScreenshot();
        multipleCucumberHtmlReporter.attach(screenshot, 'image/png', 'after');
    }
    return scenarioResult.status;
});

Given(/^I am on the main page$/, async () => {
    await openUrl('url', 'https://devi.eden-dev1.cloud.c3.cgn.ag/eden-fe/');
});

Then(/^I should see a page with (.+)$/, async (title) => {
    const pageTitle = await DashboardPage.getTitle();

    try {
        await expect(pageTitle).toBe(title);
    } catch (error) {
        throw new Error(`Expected page title to be ${title}, but found ${pageTitle}`);
    }
});